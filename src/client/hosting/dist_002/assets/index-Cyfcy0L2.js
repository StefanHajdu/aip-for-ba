var me=Object.defineProperty;var _e=(n,e,t)=>e in n?me(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Q=(n,e,t)=>_e(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const i of f.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function r(l){if(l.ep)return;l.ep=!0;const f=t(l);fetch(l.href,f)}})();function q(){}function ce(n){return n()}function te(){return Object.create(null)}function j(n){n.forEach(ce)}function ae(n){return typeof n=="function"}function H(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function he(n){return Object.keys(n).length===0}function m(n,e){n.appendChild(e)}function $(n,e,t){n.insertBefore(e,t||null)}function y(n){n.parentNode&&n.parentNode.removeChild(n)}function de(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function b(n){return document.createElement(n)}function D(n){return document.createTextNode(n)}function L(){return D(" ")}function R(){return D("")}function ne(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function g(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function be(n){return Array.from(n.childNodes)}function pe(n,e){e=""+e,n.data!==e&&(n.data=e)}function re(n,e){n.value=e??""}let W;function P(n){W=n}const S=[],le=[];let C=[];const oe=[],xe=Promise.resolve();let Y=!1;function ye(){Y||(Y=!0,xe.then(ge))}function K(n){C.push(n)}const V=new Set;let B=0;function ge(){if(B!==0)return;const n=W;do{try{for(;B<S.length;){const e=S[B];B++,P(e),$e(e.$$)}}catch(e){throw S.length=0,B=0,e}for(P(null),S.length=0,B=0;le.length;)le.pop()();for(let e=0;e<C.length;e+=1){const t=C[e];V.has(t)||(V.add(t),t())}C.length=0}while(S.length);for(;oe.length;)oe.pop()();Y=!1,V.clear(),P(n)}function $e(n){if(n.fragment!==null){n.update(),j(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(K)}}function we(n){const e=[],t=[];C.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),C=e}const M=new Set;let E;function I(){E={r:0,c:[],p:E}}function T(){E.r||j(E.c),E=E.p}function p(n,e){n&&n.i&&(M.delete(n),n.i(e))}function _(n,e,t,r){if(n&&n.o){if(M.has(n))return;M.add(n),E.c.push(()=>{M.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function U(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function A(n){n&&n.c()}function O(n,e,t){const{fragment:r,after_update:l}=n.$$;r&&r.m(e,t),K(()=>{const f=n.$$.on_mount.map(ce).filter(ae);n.$$.on_destroy?n.$$.on_destroy.push(...f):j(f),n.$$.on_mount=[]}),l.forEach(K)}function N(n,e){const t=n.$$;t.fragment!==null&&(we(t.after_update),j(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ke(n,e){n.$$.dirty[0]===-1&&(S.push(n),ye(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function F(n,e,t,r,l,f,i=null,u=[-1]){const s=W;P(n);const o=n.$$={fragment:null,ctx:[],props:f,update:q,not_equal:l,bound:te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:te(),dirty:u,skip_bound:!1,root:e.target||s.$$.root};i&&i(o.root);let c=!1;if(o.ctx=t?t(n,e.props||{},(a,x,...d)=>{const w=d.length?d[0]:x;return o.ctx&&l(o.ctx[a],o.ctx[a]=w)&&(!o.skip_bound&&o.bound[a]&&o.bound[a](w),c&&ke(n,a)),x}):[],o.update(),c=!0,j(o.before_update),o.fragment=r?r(o.ctx):!1,e.target){if(e.hydrate){const a=be(e.target);o.fragment&&o.fragment.l(a),a.forEach(y)}else o.fragment&&o.fragment.c();e.intro&&p(n.$$.fragment),O(n,e.target,e.anchor),ge()}P(s)}class G{constructor(){Q(this,"$$");Q(this,"$$set")}$destroy(){N(this,1),this.$destroy=q}$on(e,t){if(!ae(t))return q;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const l=r.indexOf(t);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!he(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ve="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ve);function qe(n){let e,t,r,l,f,i,u;return{c(){e=b("div"),t=b("div"),r=b("div"),l=b("div"),l.innerHTML='<span class="text-sm font-semibold text-gray-900 dark:text-white">Bot</span> <span class="text-sm font-normal text-gray-500 dark:text-gray-400">11:46</span>',f=L(),i=b("p"),u=D(n[0]),g(l,"class","flex items-center space-x-2 rtl:space-x-reverse"),g(i,"class","py-2.5 text-sm font-normal text-gray-900 dark:text-white"),g(r,"class","leading-1.5 flex w-full max-w-[320px] flex-col rounded-r-xl rounded-bl-xl border-gray-200 bg-gray-200 p-4 dark:bg-gray-700"),g(t,"class","flex items-start gap-2.5 pl-2"),g(e,"class","grid gap-4")},m(s,o){$(s,e,o),m(e,t),m(t,r),m(r,l),m(r,f),m(r,i),m(i,u)},p(s,[o]){o&1&&pe(u,s[0])},i:q,o:q,d(s){s&&y(e)}}}function Oe(n,e,t){let{answer:r}=e;return n.$$set=l=>{"answer"in l&&t(0,r=l.answer)},[r]}class Z extends G{constructor(e){super(),F(this,e,Oe,qe,H,{answer:0})}}function Ne(n){let e,t,r,l,f,i;return{c(){e=b("div"),t=b("div"),r=b("div"),r.innerHTML='<span class="text-sm font-semibold text-gray-900 dark:text-white">User</span> <span class="text-sm font-normal text-gray-500 dark:text-gray-400">11:46</span>',l=L(),f=b("p"),i=D(n[0]),g(r,"class","flex items-center space-x-2 rtl:space-x-reverse"),g(f,"class","py-2.5 text-sm font-normal text-gray-900 dark:text-white"),g(t,"class","leading-1.5 flex w-full max-w-[320px] flex-col rounded-l-xl rounded-br-xl border-gray-200 bg-gray-400 p-4 dark:bg-gray-700"),g(e,"class","flex items-start gap-2.5 pl-2")},m(u,s){$(u,e,s),m(e,t),m(t,r),m(t,l),m(t,f),m(f,i)},p(u,[s]){s&1&&pe(i,u[0])},i:q,o:q,d(u){u&&y(e)}}}function Ee(n,e,t){let{question:r}=e;return n.$$set=l=>{"question"in l&&t(0,r=l.question)},[r]}class z extends G{constructor(e){super(),F(this,e,Ee,Ne,H,{question:0})}}function se(n,e,t){const r=n.slice();return r[9]=e[t],r}function ie(n,e,t){const r=n.slice();return r[9]=e[t],r}function Le(n){let e,t,r,l,f,i=U(n[0]),u=[];for(let o=0;o<i.length;o+=1)u[o]=fe(se(n,i,o));const s=o=>_(u[o],1,1,()=>{u[o]=null});return t=new z({props:{question:n[2]}}),l=new Z({props:{answer:n[1]}}),{c(){for(let o=0;o<u.length;o+=1)u[o].c();e=L(),A(t.$$.fragment),r=L(),A(l.$$.fragment)},m(o,c){for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(o,c);$(o,e,c),O(t,o,c),$(o,r,c),O(l,o,c),f=!0},p(o,c){if(c&1){i=U(o[0]);let d;for(d=0;d<i.length;d+=1){const w=se(o,i,d);u[d]?(u[d].p(w,c),p(u[d],1)):(u[d]=fe(w),u[d].c(),p(u[d],1),u[d].m(e.parentNode,e))}for(I(),d=i.length;d<u.length;d+=1)s(d);T()}const a={};c&4&&(a.question=o[2]),t.$set(a);const x={};c&2&&(x.answer=o[1]),l.$set(x)},i(o){if(!f){for(let c=0;c<i.length;c+=1)p(u[c]);p(t.$$.fragment,o),p(l.$$.fragment,o),f=!0}},o(o){u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)_(u[c]);_(t.$$.fragment,o),_(l.$$.fragment,o),f=!1},d(o){o&&(y(e),y(r)),de(u,o),N(t,o),N(l,o)}}}function Ae(n){let e,t,r=U(n[0]),l=[];for(let i=0;i<r.length;i+=1)l[i]=ue(ie(n,r,i));const f=i=>_(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=R()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);$(i,e,u),t=!0},p(i,u){if(u&1){r=U(i[0]);let s;for(s=0;s<r.length;s+=1){const o=ie(i,r,s);l[s]?(l[s].p(o,u),p(l[s],1)):(l[s]=ue(o),l[s].c(),p(l[s],1),l[s].m(e.parentNode,e))}for(I(),s=r.length;s<l.length;s+=1)f(s);T()}},i(i){if(!t){for(let u=0;u<r.length;u+=1)p(l[u]);t=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)_(l[u]);t=!1},d(i){i&&y(e),de(l,i)}}}function Be(n){let e,t;return e=new z({props:{question:n[9].text}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),t=!0},p(r,l){const f={};l&1&&(f.question=r[9].text),e.$set(f)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Se(n){let e,t;return e=new Z({props:{answer:n[9].text}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),t=!0},p(r,l){const f={};l&1&&(f.answer=r[9].text),e.$set(f)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function fe(n){let e,t,r,l;const f=[Se,Be],i=[];function u(s,o){return s[9].role==="bot"?0:s[9].role==="user"?1:-1}return~(e=u(n))&&(t=i[e]=f[e](n)),{c(){t&&t.c(),r=R()},m(s,o){~e&&i[e].m(s,o),$(s,r,o),l=!0},p(s,o){let c=e;e=u(s),e===c?~e&&i[e].p(s,o):(t&&(I(),_(i[c],1,1,()=>{i[c]=null}),T()),~e?(t=i[e],t?t.p(s,o):(t=i[e]=f[e](s),t.c()),p(t,1),t.m(r.parentNode,r)):t=null)},i(s){l||(p(t),l=!0)},o(s){_(t),l=!1},d(s){s&&y(r),~e&&i[e].d(s)}}}function Ce(n){let e,t;return e=new z({props:{question:n[9].text}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),t=!0},p(r,l){const f={};l&1&&(f.question=r[9].text),e.$set(f)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function je(n){let e,t;return e=new Z({props:{answer:n[9].text}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),t=!0},p(r,l){const f={};l&1&&(f.answer=r[9].text),e.$set(f)},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function ue(n){let e,t,r,l;const f=[je,Ce],i=[];function u(s,o){return s[9].role==="bot"?0:s[9].role==="user"?1:-1}return~(e=u(n))&&(t=i[e]=f[e](n)),{c(){t&&t.c(),r=R()},m(s,o){~e&&i[e].m(s,o),$(s,r,o),l=!0},p(s,o){let c=e;e=u(s),e===c?~e&&i[e].p(s,o):(t&&(I(),_(i[c],1,1,()=>{i[c]=null}),T()),~e?(t=i[e],t?t.p(s,o):(t=i[e]=f[e](s),t.c()),p(t,1),t.m(r.parentNode,r)):t=null)},i(s){l||(p(t),l=!0)},o(s){_(t),l=!1},d(s){s&&y(r),~e&&i[e].d(s)}}}function Pe(n){let e,t,r,l,f,i,u,s,o,c,a,x,d,w;const X=[Ae,Le],k=[];function ee(h,v){return h[3]?1:0}return t=ee(n),r=k[t]=X[t](n),{c(){e=b("div"),r.c(),l=L(),f=b("div"),i=b("label"),i.textContent="Your message",u=L(),s=b("div"),o=b("textarea"),c=L(),a=b("button"),a.innerHTML='<svg class="h-5 w-5 rotate-90 rtl:-rotate-90" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20"><path d="m17.914 18.594-8-18a1 1 0 0 0-1.828 0l-8 18a1 1 0 0 0 1.157 1.376L8 18.281V9a1 1 0 0 1 2 0v9.281l6.758 1.689a1 1 0 0 0 1.156-1.376Z"></path></svg>',g(e,"class","h-72 overflow-auto p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700"),g(i,"for","chat"),g(i,"class","sr-only"),g(o,"id","chat"),g(o,"rows","3"),g(o,"class","mx-4 block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"),g(o,"placeholder","Your message..."),g(a,"class","inline-flex cursor-pointer justify-center rounded-full p-2 text-blue-600 hover:bg-blue-100 dark:text-blue-500 dark:hover:bg-gray-600"),g(s,"class","flex items-center rounded-lg bg-gray-50 px-3 py-2 dark:bg-gray-700")},m(h,v){$(h,e,v),k[t].m(e,null),$(h,l,v),$(h,f,v),m(f,i),m(f,u),m(f,s),m(s,o),re(o,n[2]),m(s,c),m(s,a),x=!0,d||(w=[ne(o,"input",n[5]),ne(a,"click",n[4])],d=!0)},p(h,[v]){let J=t;t=ee(h),t===J?k[t].p(h,v):(I(),_(k[J],1,1,()=>{k[J]=null}),T(),r=k[t],r?r.p(h,v):(r=k[t]=X[t](h),r.c()),p(r,1),r.m(e,null)),v&4&&re(o,h[2])},i(h){x||(p(r),x=!0)},o(h){_(r),x=!1},d(h){h&&(y(e),y(l),y(f)),k[t].d(),d=!1,j(w)}}}const Ie="https://aip-api.shs-net.org/generate-rag?limit=2&stream=False&model=llama3%2E1";function Te(n,e,t){let r,l,f,i,u;async function s(){r!==""&&(console.log(`from ChatDialog; run with prompt: ${r}`),t(3,f=!0),await o(),t(0,i=[...i,{id:u+1,role:"user",text:r},{id:u+2,role:"bot",text:l}]),t(1,l=""),t(2,r=""),t(3,f=!1))}async function o(){const a=await fetch(Ie,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({prompt:r})});if(a&&a.body){const x=await a.json();t(1,l=x.llm_answer+x.sources.toString())}else t(1,l="Invalid answer!")}function c(){r=this.value,t(2,r)}return n.$$.update=()=>{n.$$.dirty&1&&(u=i.length)},t(2,r=""),t(1,l=""),t(3,f=!1),t(0,i=[{id:1,role:"bot",text:"Welcome from bot!"},{id:2,role:"user",text:"User Q"},{id:3,role:"bot",text:"Bot A"}]),[i,l,r,f,s,c]}class Me extends G{constructor(e){super(),F(this,e,Te,Pe,H,{})}}function Ue(n){let e,t;return e=new Me({}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),t=!0},p:q,i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}class He extends G{constructor(e){super(),F(this,e,null,Ue,H,{})}}new He({target:document.getElementById("app")});
